<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fragebogen mit Tierprofil</title>
  <!-- Open Sans einbinden statt Roboto -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Plugin f√ºr Prozentwerte im Diagramm -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    /* Basis-Styling */
    body {
      font-family: 'Open Sans', sans-serif;
      margin: 0 auto;
      padding: 0 20px 40px;
      max-width: 960px;
      background: #f5f5f5;
      color: #2c2c2c; /* neutraler, gut lesbarer Text */
    }
    h1 {
      font-size: 2rem;
      font-weight: 700;
      color: #1a1a1a;
      text-align: center;
      margin-top: 60px;
      margin-bottom: 20px;
      letter-spacing: 0.3px;
    }
.user-inputs {
  margin-bottom: 30px;
}
.user-inputs input {
  padding: 10px;
  width: 100%;
  max-width: 400px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 1em;
}
#result-footer {
  display: none;
}
.user-inputs label {
  font-weight: bold;
  color: #333;
}

    /* Logo, Header und Beschreibung */
.logo-wrapper {
  text-align: center;
}

/* OrganisationsZoo-Text ausblenden */
.logo-wrapper .organisationszoo {
  display: none !important;
}

/* Eule ohne kreisf√∂rmigen Zuschnitt */
.logo-wrapper .eule,
#result-header img {
  display: block;
  margin: 0 auto;
  width: 200px;       /* gew√ºnschte Breite; anpassen, falls n√∂tig */
  height: 200px;      /* gleiche H√∂he f√ºr einen quadratischen Bereich */
  object-fit: cover;  /* sorgt daf√ºr, dass das Bild vollst√§ndig angezeigt wird */
  border-radius: 0;   /* kein runder Zuschnitt */
  background-color: #ffffff;
  border: none;
}

.logo-container {
  width: 100vw;
  margin-left: calc(-50vw + 50%);
  background-color: #ffffff;
  padding: 40px 0;
  box-sizing: border-box;
}

.logo-background {
  background-color: #ffffff;
  padding: 30px 0;
}
   .beschreibung {
    max-width: 800px;
    margin: 40px auto;
    font-size: 1.1em;
    line-height: 1.7;
    color: #2c2c2c;
    text-align: center;
  }
  .beschreibung h2 {
    font-size: 1.6em;
    font-weight: 600;
    color: #1a1a1a;
    margin-bottom: 20px;
  }
  .beschreibung .highlight {
    color: #E44A00;
    font-weight: bold;
  }

  /* Dark Mode */
  @media (prefers-color-scheme: dark) {
    .beschreibung {
      color: #f0f0f0;
    }

    .beschreibung h2 {
      color: #ffffff;
    }

    .beschreibung .highlight {
      color: #E44A00;
    }
}
/* Light Mode (Standard) */
h2 {
  color: #000; /* oder dein Standard-Dunkelblau */
}

/* Dark Mode */
@media (prefers-color-scheme: dark) {
  h2 {
    color: #ffffff; /* Willkommens-Text in Wei√ü */
  }

  .highlight {
    color: #E44A00; /* OrganisationsZoo bleibt orange */
  }
}
    .intro-section {
      background-color: #ffffff;
      padding: 40px 20px;
      width: 100vw;
      margin-left: calc(-50vw + 50%);
      box-sizing: border-box;
    }
    /* Galerie und Profilboxen */
    #gallery,
    .chartWrap {
      display: flex;
      flex-direction: column;
      gap: 20px;
      align-items: center;
      width: 100%;
    }
    .tier-profil {
      width: 100%;
      max-width: 960px;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      padding: 10px;
      box-sizing: border-box;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .tier-bild {
      flex: 0 0 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .tier-bild img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    .tier-text {
      flex: 1;
      padding: 0 10px;
      text-align: center;
      font-size: 0.9em;
      color: #2c2c2c;
    }
    .tier-text strong {
      font-size: 1.1em;
      color: #1a1a1a;
      display: block;
      margin-bottom: 4px;
    }
    .tier-text p,
    .tier-text em {
      font-size: 0.85em;
    }
    .tier-diagramm {
      flex: 0 0 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    /* Frage-Boxen und Antworten */
    .frage-box {
      background: #fff;
      padding: 15px 20px;
      margin: 20px 0;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .frage-box h2 {
      font-size: 1.1em;
      margin-bottom: 10px;
      color: #2c3e50;
      font-weight: 600;
    }
    .skala-antwort {
      margin-bottom: 10px;
    }
    .skala-antwort label {
      color: #555555;
      font-weight: 500;
    }

/* Dark Mode f√ºr Fragen */
@media (prefers-color-scheme: dark) {
  .frage-box {
    background: #1e1e1e;
    color: #f0f0f0;
  }
  .frage-box h2 {
    color: #f0f0f0;
  }
  .skala-antwort label {
    color: #dddddd;
  }
  .skala-antwort input[type="radio"] {
    accent-color: #E44A00;
  }
}
/* Radio-Buttons orange einf√§rben */
input[type="radio"] {
  accent-color: #E44A00;
}
    /* Buttons */
    button {
      display: block;
      margin: 25px auto;
      padding: 12px 25px;
      font-size: 1rem;
      background-color: #E44A00;
      color: #fff;
      border: none;
      border-radius: 30px;
      cursor: pointer;
    }

    #ergebnis {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      margin: 30px auto;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      display: none;
    }
    /* Responsive Styles */
    @media screen and (max-width: 600px) {
      .frage-box, #ergebnis {
        padding: 15px;
      }
      canvas {
        max-width: 100% !important;
        height: auto !important;
      }
    }


   /* Druck-Stile */
@media print {
  /* Elemente der Hauptseite ausblenden */
  #fragebogen, 
  button[type="submit"], 
  .logo-wrapper { 
    display: none;
  }
  
  /* Ergebnisbereich anzeigen */
  #ergebnis {
    display: block;
    width: 100%;
    padding: 10px;
  }
  
  #eule-logo {
    width: 50px !important;
    height: auto !important;
    margin-bottom: 10px !important;
  }
  
  .organisationszoo {
    font-size: 20px !important;
  }
  
  .category-header h2 {
    font-size: 1.2em !important;
  }
  
  .category-header p {
    font-size: 0.8em !important;
  }
  
  .page-break {
    page-break-after: always;
  }
  
  .second-evaluation {
    font-size: 10pt;
    margin: 0 auto;
    max-width: 100%;
    padding: 5mm;
  }
  
  .second-evaluation h2 {
    font-size: 14pt !important;
  }
  
  .second-evaluation h3 {
    font-size: 12pt !important;
  }
  
  .second-evaluation p {
    font-size: 10pt !important;
  }
  
  .second-evaluation canvas {
    max-width: 90% !important;
    height: auto !important;
  }
  
  /* Top-5-Bereich und Konfliktbereich dynamisch skalieren */
  .chartWrap {
    transform: scale(0.9);
    transform-origin: center top;
  }
  
  /* Reduziere die Abst√§nde in den Profil-Boxen */
  .tier-profil {
    padding: 5px !important;
    margin-bottom: 10px !important;
  }
  
  /* Schriftgr√∂ssen in den Profil-Texten verkleinern */
  .tier-text strong {
    font-size: 1em !important;
  }
  .tier-text p, 
  .tier-text em {
    font-size: 0.8em !important;
  }
}

@media (prefers-color-scheme: dark) {
  h1 {
    color: #ffffff;
    background-color: transparent;
  }
}

/* Finaler Dark Mode f√ºr gesamte Seite */
@media (prefers-color-scheme: dark) {
  body {
    background-color: #111;
    color: #eee;
  }
  .beschreibung, .frage-box, #ergebnis {
    background-color: #222;
    color: #ddd;
  }
}

@media screen and (max-width: 600px) {
  #result-header {
    /* Skaliere den gesamten Container, damit er auf mobilen Ger√§ten reinpasst */
    transform: scale(0.8);
    transform-origin: top left;
    /* Eventuell musst du die Breite erh√∂hen, damit die Skalierung korrekt funktioniert. 
       Hier als Beispiel: */
    width: 125%;
  }
}

.tier-container {
  background: white;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  border: 1px solid #ddd;
  padding: 10px;
  margin-bottom: 20px;
  border-radius: 12px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  font-size: 0.85em;
  flex-wrap: wrap;
  color: #000; /* Textfarbe schwarz */
}

/* Dark Mode ‚Äì Hintergrund & Textfarbe trotzdem wie im Light Mode */
@media (prefers-color-scheme: dark) {
  .tier-container {
    background-color: white !important;
    color: #000 !important;
  }
}

/* Mobile Optimierung */
@media screen and (max-width: 600px) {
  .tier-container {
    flex-direction: column;
    text-align: center;
    padding: 15px;
  }

  .tier-container > div {
    margin-bottom: 10px;
  }

  .tier-container img {
    height: auto;
    max-height: 120px;
  }
}
  </style>
</head>
<body>
  <div class="logo-container">
    <div class="logo-wrapper">
      <img src="eule-organisationszoo.png" alt="Eule" class="eule" />
      <div class="organisationszoo">OrganisationsZoo</div>
    </div>
  </div>

  <div class="beschreibung">
    <h2>
      Willkommen beim <span class="highlight">OrganisationsZoo</span>
    </h2>
    <p>
      Stell dir vor, du befindest dich in einer herausfordernden Arbeitssituation ‚Äì sei es in einem dynamischen Team, bei einem wichtigen Projekt oder in einer Konfliktsituation.
    </p>
    <p>
      √úberlege genau, wie du in solchen Momenten reagierst, Entscheidungen triffst und welche St√§rken du einsetzt.
    </p>
    <p>
      F√ºr jede der folgenden Aussagen w√§hlst du eine Zahl von 0 (‚Äûgar nicht‚Äú) bis 4 (‚Äûvoll zutreffend‚Äú). Achte darauf, dass deine Antworten authentisch deine typischen Verhaltensweisen widerspiegeln.
    </p>
    <p>
      Viel Erfolg beim Ausf√ºllen ‚Äì und beim Entdecken deiner tierisch starken Seiten!
    </p>
  </div>

  <h1>Dein Fragebogen</h1>

<!-- üßç‚Äç‚ôÄÔ∏è Eingabefelder f√ºr Name und E-Mail -->
<div class="user-inputs">
    <label for="name">Name:</label><br />
    <input type="text" id="name" name="name" placeholder="Dein Name" /><br /><br />

    <label for="email">E-Mail-Adresse: <span style="color: red">*</span></label><br />
    <input type="email" id="email" name="email" placeholder="deine@email.de" required /><br /><br />
  </div>
<!-- üìã Der Fragebogen -->
<form id="fragebogen">
</form>

<!-- üîò Auswerten-Button (anfangs deaktiviert) -->
<button type="submit" form="fragebogen" id="auswertenBtn" disabled>Auswerten</button>

<!-- üñ® Ergebnis + Druckbutton -->
<div id="ergebnis" style="display:none;"></div>
<button id="printButton" style="display:none;">üñ® Drucken</button>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const formElem = document.getElementById("fragebogen");
      const ergebnisElem = document.getElementById("ergebnis");
      const printButton = document.getElementById("printButton");
      // Array der Fragen
      const questions = [
  {
    frage: "Frage 1: Wie setzt du deine F√§higkeiten in einem Team am liebsten ein?",
    keyword: "Team",
    answers: {
      A: { code: "S1", text: "Ich √ºbernehme gerne <strong>Verantwortung</strong>, koordiniere Aufgaben und achte auf den Gesamt√ºberblick." },
      B: { code: "S2", text: "Ich arbeite <strong>strukturiert</strong>, gehe Schritt f√ºr Schritt vor und bleibe bei erprobten Methoden." },
      C: { code: "R1", text: "Ich halte auch unter Druck durch, bleibe <strong>ausdauernd</strong> und verliere mein Ziel nicht aus den Augen." },
      D: { code: "R2", text: "Im Team verfolge ich einen individuellen Ansatz bringe eigene <strong>Ideen</strong>  ein und sch√§tze es, wenn auch alternative Perspektiven ber√ºcksichtigt werden." }
    }
  },
  {
    frage: "Frage 2: Wie verh√§ltst du dich, wenn im Team Konflikte auftreten?",
    keyword: "Konflikte",
    answers: {
      A: { code: "S3", text: "Ich suche das direkte <strong>Gespr√§ch</strong>, h√∂re alle Seiten an und strebe eine gemeinsame L√∂sung an." },
      B: { code: "S4", text: "In Konflikten halte ich mich vordergr√ºndig <strong>neutral</strong>, beobachte genau ‚Äì und greife subtil ein, wenn ich erkenne, wo mein Einfluss am wirkungsvollsten ist." },
      C: { code: "R3", text: "Ich stelle <strong>provozierende</strong> Fragen, um festgefahrene Denkblockaden aufzubrechen ‚Äì auch wenn das aneckt." },
      D: { code: "R4", text: "Ich bleibe <strong>ruhig</strong>, vermeide vorschnelle Urteile und vermittle Stabilit√§t in der Gruppe." }
    }
  },
  {
    frage: "Frage 3: Was motiviert dich, deine Arbeit mit vollem Einsatz zu erledigen?",
    keyword: "Einsatz",
    answers: {
      A: { code: "S5", text: "Ich sch√∂pfe meine St√§rke aus <strong>Erfahrung</strong> auch in schwierigen Situationen halte ich durch und verliere nicht den Boden unter den F√ºssen." },
      B: { code: "S6", text: "Inspirierende <strong>Visionen</strong> und die Hoffnung, etwas Sinnvolles oder Kreatives beizutragen." },
      C: { code: "R5", text: "Die Chance, <strong>strategisch</strong> vorzugehen, clevere L√∂sungen zu finden und Chancen zu erkennen." },
      D: { code: "R6", text: "Ich bin dann voll dabei, wenn ich <strong>schnell</strong>  reagieren, gezielt Einfluss nehmen und mit Nachdruck meine Interessen durchsetzen kann ‚Äì notfalls auch gegen Widerstand." }
    }
  },
  {
    frage: "Frage 4: Wie gehst du mit unerwarteten Ver√§nderungen im Arbeitsablauf um?",
    keyword: "Ver√§nderungen",
    answers: {
      A: { code: "S7", text: "Ich bleibe <strong>ruhig</strong>, passe mich an, sobald ich die neue Situation verstehe." },
      B: { code: "S8", text: "Ich <strong>analysiere</strong> gr√ºndlich, schaue mir Risiken und Chancen an, bevor ich handle." },
      C: { code: "R7", text: "Ich ziehe mich etwas zur√ºck, gehe <strong>schrittweise</strong> vor und vermeide √ºbereilte Entschl√ºsse." },
      D: { code: "R8", text: "Ich √ºbernehme <strong>spontan</strong> Verantwortung und greife schnell ein, wenn ich eine M√∂glichkeit sehe." }
    }
  },
  {
    frage: "Frage 5: Welche Aspekte sind dir in einem Arbeitsumfeld besonders wichtig?",
    keyword: "Arbeitsumfeld",
    answers: {
      A: { code: "S9", text: "Besonnene, eher langsame Entscheidungen, damit nichts <strong>√ºberst√ºrzt</strong> wird." },
      B: { code: "S10", text: "Ein Umfeld, in dem ich klug agieren, Entwicklungen <strong>beobachten</strong> und zum richtigen Zeitpunkt die besten Chancen nutzen kann." },
      C: { code: "R11", text: "<strong>Provokante</strong> Impulse, die eingefahrene Routinen aufbrechen ‚Äì auch wenn das andere als aufdringlich empfunden wird." },
      D: { code: "R12", text: "Effizienz und <strong>Zuverl√§ssigkeit</strong>, damit das Team ein klares Ziel im Auge beh√§lt." }
    }
  },
  {
    frage: "Frage 6: Wie triffst du pers√∂nlich Entscheidungen in unsicheren Situationen?",
    keyword: "Entscheidungen",
    answers: {
      A: { code: "S11", text: "Ich beziehe gern mein Umfeld ein, diskutiere mit dem Team und suche einen <strong>Konsens</strong>." },
      B: { code: "S12", text: "Ich setze auf Bew√§hrtes, bleibe <strong>loyal</strong> gegen√ºber bestehenden Strukturen und gehe ungern Risiken ein." },
      C: { code: "R9", text: "Ich handle <strong>schnell</strong> und entschlossen, ohne mich lange von Unsicherheiten aufhalten zu lassen." },
      D: { code: "R10", text: "Ich folge meinem <strong>Bauchgef√ºhl</strong> und bin offen f√ºr spontane Ideen, auch wenn sie ungew√∂hnlich sind." }
    }
  },
  {
    frage: "Frage 7: Welche Rolle spielt Unabh√§ngigkeit in deinem Arbeitsalltag?",
    keyword: "Unabh√§ngigkeit",
    answers: {
      A: { code: "S13", text: "Ich halte mich f√ºr √§usserst vielseitig und <strong>kreativ</strong>, manchmal √ºbersch√§tze ich dabei meine M√∂glichkeiten." },
      B: { code: "S14", text: "Ich finde <strong>Durchsetzungsf√§higkeit</strong> entscheidend, um eigenst√§ndig handeln zu k√∂nnen." },
      C: { code: "R15", text: "<strong>Teamgeist</strong> geht vor; ich lege grossen Wert auf Austausch und ein starkes Gemeinschaftsgef√ºhl." },
      D: { code: "R16", text: "Mir ist eine reibungslose <strong>Kommunikation</strong> besonders wichtig, damit alle an einem Strang ziehen." }
    }
  },
  {
    frage: "Frage 8: Wie stehst du zu Verantwortung im Job?",
    keyword: "Verantwortung",
    answers: {
      A: { code: "S15", text: "Ich √ºbernehme <strong>Verantwortung</strong> eher unterst√ºtzend, sorge f√ºr Effizienz und helfe dem Team, ohne im Rampenlicht zu stehen." },
      B: { code: "S16", text: "Ich setze <strong>konsequent</strong> meine eigenen Ideen durch, selbst wenn das Team das als eigenwillig oder st√∂rend empfindet." },
      C: { code: "R13", text: "Ich nutze Verantwortung <strong>strategisch</strong> und scheue mich nicht, nachdr√ºcklich zu handeln, wenn es meinen Zielen dient." },
      D: { code: "R14", text: "Ich kombiniere viele <strong>F√§higkeiten</strong> und bin √ºberzeugt, fast alles l√∂sen zu k√∂nnen, was teils √ºberheblich wirkt." }
    }
  },
  {
    frage: "Frage 9: Wie reagierst du, wenn du kritisiert wirst?",
    keyword: "kritisiert",
    answers: {
      A: { code: "S17", text: "Ich bin <strong>offen</strong> daf√ºr, reflektiere mein Verhalten und passe mich an, wenn es sinnvoll ist." },
      B: { code: "S18", text: "Ich halte an meinem <strong>Standpunkt</strong> fest und lasse mich nicht schnell verunsichern." },
      C: { code: "R19", text: "Ich denke ausgiebig nach und ziehe meine Lehren aus <strong>konstruktiver Kritik</strong>." },
      D: { code: "R20", text: "Ich bleibe <strong>gefasst</strong> und nutze Feedback als Chance zur Weiterentwicklung." }
    }
  },
  {
    frage: "Frage 10: Welche Rolle nimmst du typischerweise in einem Team ein?",
    keyword: "Rolle",
    answers: {
      A: { code: "S19", text: "Ich √ºbernehme gerne <strong>F√ºhrung</strong>, bin mutig und gehe voran." },
      B: { code: "S20", text: "Ich arbeite <strong>gr√ºndlich</strong>, k√ºmmere mich um Details und gebe dem Team R√ºckhalt." },
      C: { code: "R21", text: "Ich bringe <strong>vision√§re</strong> Ideen ein, wirke jedoch manchmal z√∂gerlich oder unsicher, wenn es an die Umsetzung geht." },
      D: { code: "R22", text: "Ich halte an bew√§hrten Rollen fest, agiere zur√ºckhaltend, aber mit <strong>Erfahrung</strong> besonders wenn es um Stabilit√§t geht." }
    }
  },
  {
    frage: "Frage 11: Wie gestaltest du deine langfristige Planung?",
    keyword: "Planung",
    answers: {
      A: { code: "S21", text: "Ich investiere viel <strong>Energie</strong> und nutze jede Gelegenheit, notfalls auch manipulativ, um voranzukommen." },
      B: { code: "S22", text: "Ich passe meine Pl√§ne <strong>flexibel</strong> an, behalte aber mein Hauptziel stets im Blick." },
      C: { code: "R17", text: "Ich wahre den <strong>√úberblick</strong>, formuliere klare Visionen und verfolge sie konsequent." },
      D: { code: "R18", text: "Ich bleibe <strong>besonnen</strong> und bedacht, lasse mich auch durch Stress nicht aus der Ruhe bringen." }
    }
  },
  {
    frage: "Frage 12: Wie reagierst du auf hohen Zeit- oder Leistungsdruck?",
    keyword: "Leistungsdruck",
    answers: {
      A: { code: "S23", text: "Ich strahle <strong>Ruhe</strong> aus, strukturiere meine Aufgaben und lasse mich nicht hetzen." },
      B: { code: "S24", text: "Ich ziehe mich gern zur√ºck, lasse andere agieren ‚Äì und nutze die Gelegenheit, <strong>unauff√§llig</strong> meinen Vorteil zu sichern." },
      C: { code: "R25", text: "Ich gehe <strong>systematisch</strong> vor, um Fehler zu vermeiden und den √úberblick zu behalten." },
      D: { code: "R26", text: "Ich ziehe das Tempo an, bleibe <strong>fokussiert</strong> und m√∂chte H√∂chstleistung zeigen." }
    }
  },
  {
    frage: "Frage 13: Welche besondere St√§rke bringst du verl√§sslich in dein Berufsleben ein?",
    keyword: "St√§rke",
    answers: {
      A: { code: "S25", text: "Ich gehe meinen eigenen Weg, arbeite mit Biss und bringe  <strong>kreative</strong> Ideen ein auch wenn ich mich selten anpasse." },
      B: { code: "S26", text: "Ich bin <strong>robust</strong>, halte lange durch und scheue keine grossen Herausforderungen." },
      C: { code: "R23", text: "Meine St√§rke liegt darin, mich situativ <strong>anzupassen</strong>, zwischen den Zeilen zu lesen und auch in komplexen Situationen ohne grossen Widerstand meinen Weg zu finden." },
      D: { code: "R24", text: "Ich bin <strong>kooperativ</strong>, entwickle neue Ideen und f√∂rdere den Zusammenhalt im Team." }
    }
  },
  {
    frage: "Frage 14: Welche St√§rken beschreiben dich am besten (Mix‚ÄêFrage)?",
    keyword: "St√§rken",
    answers: {
      A: { code: "C1", text: "Fleiss, Flexibilit√§t, Raffinesse, <strong>vision√§res</strong> Denken (vereint mehrere Eigenschaften)." },
      B: { code: "C2", text: "<strong>Robust</strong>, unabh√§ngig, zupackend, meistert grosse Herausforderungen." },
      C: { code: "C3", text: "Gelassen, bed√§chtig, <strong>weise</strong>, strategisch ‚Äì oft mit ruhiger Energie." },
      D: { code: "C4", text: "Manchmal <strong>provokant</strong>, loyal, spontan, ideenreich in neuen Situationen." }
    }
  },
  {
    frage: "Frage 15: In welchem Bereich m√∂chtest du dich pers√∂nlich weiterentwickeln?",
    keyword: "weiterentwickeln",
    answers: {
      A: { code: "C1", text: "Ich m√∂chte lernen, nicht immer alles <strong>kontrollieren</strong> zu wollen und auch loszulassen." },
      B: { code: "C2", text: "Ich will bewusster mit <strong>impulsiven</strong> Reaktionen umgehen und mehr Geduld entwickeln." },
      C: { code: "C3", text: "Ich arbeite daran, <strong>Entscheidungen</strong> mutiger zu treffen und nicht zu lange zu gr√ºbeln." },
      D: { code: "C4", text: "Ich m√∂chte meine <strong>Spontanit√§t</strong> besser strukturieren und emotionale Ausbr√ºche im Zaum halten." }
    }
  }
];

 // Dynamische Erzeugung der Fragen im Formular
questions.forEach((q, index) => {
  const box = document.createElement("div");
  box.className = "frage-box";
  
  // Urspr√ºnglicher Fragetext
  let frageText = q.frage;
  
  // Wenn ein Keyword definiert ist, ersetze alle Vorkommen des Schl√ºsselworts durch eine fette Version
  if (q.keyword) {
    const regex = new RegExp(`(${q.keyword})`, 'gi');  // 'gi' = global und case-insensitive
    frageText = frageText.replace(regex, '<strong>$1</strong>');
  }
  
  // Setze den modifizierten Fragetext in ein <h2>
box.innerHTML = `<h2><strong>${frageText}</strong></h2>`;  
  // Erzeuge die Antwortm√∂glichkeiten
  for (const key in q.answers) {
    const ans = q.answers[key];
    const div = document.createElement("div");
    div.className = "skala-antwort";
    let radios = "";
    for (let i = 0; i <= 4; i++) {
      radios += `
        <label>
          <input type="radio" name="frage${index}_${ans.code}" value="${i}" required /> ${i}
        </label>
      `;
    }
    div.innerHTML = `<p><strong>${key}:</strong> ${ans.text}</p>${radios}`;
    box.appendChild(div);
  }
  
  formElem.appendChild(box);
});

// Definiere hier zuerst das Mapping der Tierdaten:
const animalProperties = {
  "Ameise": {
    staerken: [
      "fleissig", "loyal", "engagiert", "gebietsorientiert",
      "instinktiv", "gesch√§ftig", "hart arbeitend", "auf den moment fokussiert"
    ],
    schwaechen: [
      "empfindsam", "denkend", "logisch", "entscheidungsfreudig",
      "individualistisch", "selbstbewusst", "vision√§r", "reflektierend"
    ]
  },
  "Biene": {
    staerken: [
      "fleissig", "teamorientiert", "kommunikativ", "gebietsorientiert",
      "wissend", "hart arbeitend", "kooperativ", "sozial", "organisiert",
      "intelligent", "loyal", "f√ºrsorglich", "aggressiv"
    ],
    schwaechen: [
      "sich selbst bewusst", "individualistisch", "leichtgl√§ubig",
      "politisch", "reflektierend", "langsam"
    ]
  },
  "chamaeleon": {
    staerken: [
      "doppelz√ºngig", "schlau", "manipulativ", "schwach",
      "politisch", "intelligent"
    ],
    schwaechen: [
      "treu", "vertrauensw√ºrdig", "konsistent", "zuversichtlich",
      "herausfordernd", "handlungsorientiert"
    ]
  },
  "Hund": {
    staerken: [
      "treu", "vertrauensvoll", "begeistert", "ungest√ºm",
      "leichtgl√§ubig", "energiegeladen", "zuverl√§ssig", "vorhersehbar",
      "gl√ºcklich", "spielerisch", "produktiv", "vertrauensw√ºrdig"
    ],
    schwaechen: [
      "sorgf√§ltig", "ernst", "nachdenklich", "denkend", "schlau"
    ]
  },
 "Adler": {
    staerken: [
      "vision√§r", "stark", "fokussiert", "inspirierend", "zuversichtlich",
      "intelligent", "produktiv", "entschlussfreudig", "ausgeglichen",
      "scharf", "handlungsorientiert", "offen", "vertrauensw√ºrdig", "intuitiv",
      "aggressiv", "verantwortlich", "holistisch", "extravertiert", "respektiert"
    ],
    schwaechen: [
      "z√∂gernd", "emotional", "schwach", "zur√ºckgezogen", "sch√ºchtern", "langsam"
    ]
  },
  "Katze": {
    staerken: [
      "individualistisch", "eifrig", "distanziert", "eitel",
      "egoistisch", "frustrierend", "arrogant", "eingebildet"
    ],
    schwaechen: [
      "kontaktfreudig", "freundlich", "f√ºrsorglich", "teamorientiert",
      "gemeinschaftsorientiert", "interessant"
    ]
  },
  "Gibbon": {
    staerken: [
      "fr√∂hlich", "spielerisch", "lebhaft", "kontaktfreudig", "cool",
      "begeistert", "lustig", "interessant", "rebellisch"
    ],
    schwaechen: [
      "vorsichtig", "ernst", "produktiv", "zukunftsorientiert", "fokussiert"
    ]
  },
  "Hy√§ne": {
    staerken: [
      "aggressiv", "intrigant", "kontrollierend", "manipulativ",
      "teamorientiert", "stark", "politisch", "opportunistisch"
    ],
    schwaechen: [
      "vertrauensw√ºrdig", "f√ºrsorglich", "r√ºcksichtsvoll", "intuitiv", "sch√ºchtern"
    ]
  },
  "Insekt_nuetzlich": {
    staerken: [
      "unterst√ºtzend", "einfallsreich", "zukunftsorientiert", "teamorientiert"
    ],
    schwaechen: [
      "egoistisch", "arrogant", "allgegenw√§rtig", "z√∂gerlich", "langsam"
    ]
},
  "Insekt_laestig": {
    staerken: [
      "allgegenw√§rtig", "eigenn√ºtzig", "Unberechenbar", "l√§stig"
    ],
    schwaechen: [
      "egoistisch", "N√ºtzlich", " f√ºrsorglich", "produktiv", "bescheiden"
    ]

  },
  "Schakal": {
    staerken: [
      "gebietsorientiert", "verteidigungseifrig", "sozial", "aggressiv",
      "kontrollierend", "lebhaft", "eifers√ºchtig", "lebenslustig", "loyal", "f√ºrsorglich"
    ],
    schwaechen: [
      "geduldig", "tolerant", "sch√ºchtern", "zur√ºckgezogen", "f√ºrsorglich"
    ]
  },
  "Kind": {
    staerken: [
      "naiv", "verspielt", "energisch", "motiviert", "entbehrlich", "begeistert", "jugendlich"
    ],
    schwaechen: [
      "erfahren", "zuverl√§ssig", "kenntnisreich", "hart im Nehmen", "pfiffig"
    ]
  },
  "L√∂we": {
    staerken: [
      "stark", "machtorientiert", "aggressiv", "kontrollierend",
      "gebietsorientiert", "faul", "eigenn√ºtzig", "manipulativ", "zuversichtlich"
    ],
    schwaechen: [
      "engagiert", "fleissig", "f√ºrsorglich", "sch√ºchtern", "emotional"
    ]
  },
  "Maus": {
    staerken: [
      "eifrig", "produktiv", "wirtschaftlich", "zuverl√§ssig", "begeistert",
      "unsichtbar", "besch√§ftigt", "individualistisch", "intelligent"
    ],
    schwaechen: [
      "faul", "extrovertiert", "eigenn√ºtzig", "aggressiv", "emotional"
    ]
  },
  "Parasit": {
    staerken: [
      "faul", "parasit√§r", "abh√§ngig", "eigenn√ºtzig", "unsichtbar"
    ],
    schwaechen: [
      "gemeinschaftsorientiert", "produktiv", "freundlich", "r√ºcksichtsvoll", "n√ºtzlich"
    ]
  },
  "Eule": {
    staerken: [
      "weise", "engagiert", "hilfsbereit", "respektiert", "kenntnisreich",
      "logisch", "scharf", "zuversichtlich", "ruhig", "gemeinschaftsorientiert"
    ],
    schwaechen: [
      "faul", "extrovertiert", "egozentrisch", "ehrgeizig", "aggressiv"
    ]
  },
  "Piranha": {
    staerken: [
      "aggressiv", "r√§uberisch", "gef√§hrlich", "egoistisch", "frustrierend",
      "ausschw√§rmend", "eigenn√ºtzig"
    ],
    schwaechen: [
      "freundlich", "vertrauensw√ºrdig", "zug√§nglich", "gl√ºcklich", "vertrauensvoll",
      "aufrichtig", "individualistisch", "vorausdenkend"
    ]
  },
  "Eiche": {
    staerken: [
      "kenntnisreich", "entscheidungsfreudig", "intelligent", "erfahren",
      "stimulierend", "inspirierend", "begeistert", "wie eltern", "zuverl√§ssig",
      "menschenfreundlich", "zug√§nglich", "selten"
    ],
    schwaechen: [
      "egoistisch", "desinteressiert", "faul", "emotional", "aggressiv"
    ]
  },
  "Klapperschlange": {
    staerken: [
      "politisch", "gerissen", "defensiv", "reaktiv", "unsicher", "laut",
      "doppelz√ºngig", "spaltend", "√ºberlebend", "angepasst an raue umgebungen"
    ],
    schwaechen: [
      "vertrauensw√ºrdig", "aufrichtig", "treu", "vertrauensvoll", "gl√ºcklich",
      "kontaktfreudig", "einladend"
    ]
  },
  "Faultier": {
    staerken: [
      "langsam", "m√ºde", "minimalistisch", "f√ºgsam", "faul"
    ],
    schwaechen: [
      "kontaktfreudig", "eifrig", "enthusiastisch", "produktiv", "gesch√§ftig",
      "anpassungsf√§hig", "gemeinschaftsorientiert", "n√ºtzlich"
    ]
  },
  "Dinosaurier": {
    staerken: [
      "m√ºde", "pessimistisch", "ver√§nderungsscheu", "fremdenfeindlich", "zur√ºckgezogen",
      "kampferprobt", "hart im nehmen", "negativ", "reflektierend", "nostalgisch", "problematisch"
    ],
    schwaechen: [
      "vision√§r", "anpassungsf√§hig", "kooperativ", "offen", "angepasst", "scharfsinnig",
      "gemeinschaftsorientiert", "opportunistisch", "jugendlich", "sozial"
    ]
  },
  "Einhorn": {
    staerken: [
      "perfekt", "vision√§r", "offen", "ehrlich", "arrogant", "unnahbar", "ehrgeizig",
      "frustrierend", "unsicher", "kontrollierend", "gef√§hrlich", "inkonsistent", "nostalgisch"
    ],
    schwaechen: [
      "realistisch", "selbstbewusst", "offen", "stimulierend", "vertrauensw√ºrdig",
      "bescheiden", "ehrlich", "vorausdenkend", "motivierend"
    ]
  },
  "Geier": {
    staerken: [
      "gemein", "angepasst", "aasfressend", "egozentrisch", "gef√§hrlich", "opportunistisch",
      "politisch", "wetteifernd", "schlau", "geduldig"
    ],
    schwaechen: [
      "wohlwollend", "vertrauensw√ºrdig", "gl√ºcklich", "teamorientiert", "mutig",
      "offen", "angenehm", "sozial"
    ]
  },
  "Wal": {
    staerken: [
      "intelligent", "inspirierend", "kenntnisreich", "m√§chtig", "sozial",
      "gemeinschaftsorientiert", "selbstgrenzend", "unfallgef√§hrdet", "zur√ºckhaltend",
      "behutsam", "vom aussterben bedroht"
    ],
    schwaechen: [
      "anpassungsf√§hig", "aggressiv", "faul", "arrogant", "gef√§hrlich", "manipulativ"
    ]
  },
  "Hybrid": {
    staerken: [
      "arrogant", "ehrgeizig", "gesch√§ftig", "extravertiert", "gebildet", "weitschweifig",
      "egoistisch", "sch√∂n", "modisch", "kompetent"
    ],
    schwaechen: [
      "erfahren", "vertrauensw√ºrdig", "tolerant", "geduldig", "f√ºrsorglich", "gr√ºndlich", "anpassungsf√§hig"
    ]
  },
  "Yak": {
    staerken: [
      "st√ºrmisch", "enthusiastisch", "taktisch", "freundlich", "frustrierend", "fr√∂hlich",
      "spielerisch", "energisch", "sozial", "gl√ºcklich", "fokussiert"
    ],
    schwaechen: [
      "vorsichtig", "geduldig", "erfahren", "r√ºcksichtsvoll", "zur√ºckhaltend", "bescheiden",
      "sanftm√ºtig", "langsam", "strategisch", "selbstbewusst", "intelligent"
]
  }
};

// Initialisiere das Mapping-Objekt
const similarityMapping = {};

// Erstelle f√ºr jedes Tier einen leeren Eintrag im Mapping
Object.keys(animalProperties).forEach(animal => {
  similarityMapping[animal] = [];
});

// Vergleiche jedes Tier mit allen anderen
Object.keys(animalProperties).forEach(animal => {
  Object.keys(animalProperties).forEach(otherAnimal => {
    if (animal === otherAnimal) return; // Selbstvergleich √ºberspringen

    // Hole die St√§rken beider Tiere
    const strengthsAnimal = animalProperties[animal].staerken;
    const strengthsOther = animalProperties[otherAnimal].staerken;
    
    // Ermittle die gemeinsamen St√§rken
    const commonStrengths = strengthsAnimal.filter(strength => strengthsOther.includes(strength));
    
    // Falls es gemeinsame Eigenschaften gibt, f√ºge den Eintrag hinzu
    if (commonStrengths.length > 0) {
      similarityMapping[animal].push({
        animal: otherAnimal,
        commonStrengths: commonStrengths,
        similarityScore: commonStrengths.length
      });
    }
  });
});

console.log(similarityMapping);

      // Definition der tierEigenschaften
      const tierEigenschaften = {
  "Ameise": ["Struktur", "Sozialverhalten"],
  "Biene": ["Struktur", "Sozialverhalten"],
  "chamaeleon": ["Flexibilit√§t", "Strategie"],
  "Hund": ["Empathie", "Sozialverhalten"],
  "Adler": ["Strategie", "Durchsetzung"],
  "Katze": ["Strategie", "Flexibilit√§t"],
  "Gibbon": ["Kreativit√§t", "Sozialverhalten"],
  "Hy√§ne": ["Durchsetzung", "Strategie"],
  "insekt_nuetzlich": ["Empathie", "Kreativit√§t"],
  "insekt_laestig": ["Flexibilit√§t", "Durchsetzung"],
  "Schakal": ["Durchsetzung", "Sozialverhalten"],
  "L√∂we": ["Durchsetzung", "Strategie"],
  "Maus": ["Struktur", "Emotionale Stabilit√§t"],
  "Parasit": ["Flexibilit√§t", "Strategie"],
  "Eule": ["Strategie", "Empathie"],
  "Piranha": ["Durchsetzung", "Flexibilit√§t"],
  "Eiche": ["Struktur", "Emotionale Stabilit√§t"],
  "Klapperschlange": ["Strategie", "Flexibilit√§t"],
  "Faultier": ["Emotionale Stabilit√§t", "Struktur"],
  "Dinosaurier": ["Struktur", "Emotionale Stabilit√§t"],
  "Einhorn": ["Kreativit√§t", "Empathie"],
  "Geier": ["Strategie", "Flexibilit√§t"],
  "Wal": ["Empathie", "Emotionale Stabilit√§t"],
  "Hybrid": ["Kreativit√§t", "Durchsetzung"],
  "Yak": ["Sozialverhalten", "Emotionale Stabilit√§t"],
  "Kind": ["Kreativit√§t", "Empathie"]
};

      // Mapping CODE -> Tier
      const codeToTier = {
        S1: "Adler",   S2: "Ameise",   R1: "Yak",     R2: "Katze",
        S3: "Biene",   S4: "chamaeleon", R3: "Parasit", R4: "Wal",
        S5: "Dinosaurier", S6: "Einhorn", R5: "Schakal", R6: "Piranha",
        S7: "Eiche",   S8: "Eule",     R7: "Maus",    R8: "L√∂we",
        S9: "Faultier", S10: "Geier",   R11: "insekt_laestig", R12: "insekt_nuetzlich",
        S11: "Gibbon", S12: "Hund",    R9: "Klapperschlange", R10: "Kind",
        S13: "Hybrid", S14: "Hy√§ne",   R15: "Hund",   R16: "Gibbon",
        S15: "insekt_nuetzlich", S16: "insekt_laestig", R13: "Hy√§ne", R14: "Hybrid",
        S17: "Kind",   S18: "Klapperschlange", R19: "Eule", R20: "Eiche",
        S19: "L√∂we",   S20: "Maus",    R21: "Einhorn", R22: "Dinosaurier",
        S21: "Piranha", S22: "Schakal", R17: "Geier",  R18: "Faultier",
        S23: "Wal",    S24: "Parasit", R25: "Ameise", R26: "Adler",
        S25: "Katze",  S26: "Yak",     R23: "chamaeleon", R24: "Biene"
      };

      // Antwortkombinationen f√ºr Frage 14 und 15
      const comboMapping = {
        C1: ["Adler", "Ameise", "Biene", "chamaeleon", "Wal", "Einhorn"],
        C2: ["Yak", "Katze", "Parasit", "Dinosaurier", "Schakal", "Piranha"],
        C3: ["Eiche", "Eule", "Maus", "L√∂we", "Faultier", "Geier", "Hybrid"],
        C4: ["insekt_laestig", "insekt_nuetzlich", "Klapperschlange", "Kind", "Hy√§ne", "Hund", "Gibbon"]
      };

      // Tier-Beschreibungen
      const tierTexte = {
        "Ameise": { kurz: " Organisiert, teamorientiert, methodisch", symbolischF√ºr: "Teamgeist" },
        "Biene": { kurz: " Fleissig, verantwortungsbewusst, anpassungsf√§hig", symbolischF√ºr: "Zusammenhalt" },
        "Cham√§leon": { kurz: " Anpassungsf√§hig, vision√§r, teils manipulativ", symbolischF√ºr: "Wandlungsf√§higkeit" },
        "Hund": { kurz: " Begeistert, emotional, offen", symbolischF√ºr: "Treue" },
        "Adler": { kurz: " Intuitiv, strategisch, wetteifernd", symbolischF√ºr: "Weitblick" },
        "Katze": { kurz: " Denkend, unabh√§ngig, rebellisch", symbolischF√ºr: "Freiheit" },
        "Gibbon": { kurz: " Kontaktfreudig, reflektierend, teils distanziert", symbolischF√ºr: "Kommunikation" },
        "Hy√§ne": { kurz: " Strategisch, ehrgeizig, aggressiv", symbolischF√ºr: "Zielstrebigkeit" },
        "Insekt (n√ºtzlich)": { kurz: " Unterst√ºtzend, einfallsreich, positiv", symbolischF√ºr: "N√ºtzlichkeit" },
        "Insekt_laestig": { kurz: " Eigensinnig, unberechenbar, oft st√∂rend", symbolischF√ºr: "Hartn√§ckigkeit" },
        "Schakal": { kurz: " Individualistisch, aggressiv, rebellisch", symbolischF√ºr: "Unabh√§ngigkeit" },
        "L√∂we": { kurz: " Intuitiv, machtbewusst, strategisch", symbolischF√ºr: "Kraft" },
        "Maus": { kurz: " Denkend, vorsichtig, zuverl√§ssig", symbolischF√ºr: "Sicherheit" },
        "Parasit": { kurz: " Unsichtbar, manipulativ, anpassungsf√§hig", symbolischF√ºr: "Tarnung" },
        "Eule": { kurz: " Weise, logisch, reflektierend", symbolischF√ºr: "Weisheit" },
        "Piranha": { kurz: " Gef√§hrlich, handlungsorientiert, manipulativ", symbolischF√ºr: "Aggression" },
        "Eiche": { kurz: " Stark, produktiv, inspirierend", symbolischF√ºr: "Stabilit√§t" },
        "Klapperschlange": { kurz: " Gef√§hrlich, intelligent, gerissen", symbolischF√ºr: "Gerissenheit" },
        "Faultier": { kurz: " Geduldig, bescheiden, langsam", symbolischF√ºr: "Gelassenheit" },
        "Dinosaurier": { kurz: " Stark, distanziert, zur√ºckgezogen", symbolischF√ºr: "Uralte Macht" },
        "Einhorn": { kurz: " Vision√§r, anpassungsf√§hig, naiv", symbolischF√ºr: "Tr√§umerei" },
        "Geier": { kurz: " Vorausschauend, intuitiv, wenig loyal", symbolischF√ºr: "Opportunismus" },
        "Wal": { kurz: " Vertrauensw√ºrdig, stark, emotional", symbolischF√ºr: "Tiefe" },
        "Hybrid": { kurz: " Intelligent, anpassungsf√§hig, distanziert", symbolischF√ºr: "Universalit√§t" },
        "Yak": { kurz: " Robust, bescheiden, strategisch", symbolischF√ºr: "Ausdauer" },
        "Kind": { kurz: " Begeistert, inspirierend, emotional", symbolischF√ºr: "Unbeschwertheit" }
      };

      // Gegenspieler-Logik
      const gegenspieler = {
        "Adler": "Kind",
        "Kind": "Adler",
        "Ameise": "Hybrid",
        "Hybrid": "Ameise",
        "Biene": "Hy√§ne",
        "Hy√§ne": "Biene",
        "Cham√§leon": "Eule",
        "Eule": "Cham√§leon",
        "Hund": "Katze",
        "Katze": "Hund",
        "Gibbon": "Parasit",
        "Parasit": "Gibbon",
        "L√∂we": "Maus",
        "Maus": "L√∂we",
        "Wal": "Schakal",
        "Schakal": "Wal",
        "Insekt (n√ºtzlich)": "Insekt_laestig",
        "Insekt_laestig": "Insekt (n√ºtzlich)",
        "Piranha": "Faultier",
        "Faultier": "Piranha",
        "Einhorn": "Geier",
        "Geier": "Einhorn",
        "Eiche": "Klapperschlange",
        "Klapperschlange": "Eiche",
        "Yak": "Dinosaurier",
        "Dinosaurier": "Yak"
      };

      // Konflikt-Texte zwischen den Tieren
      const tierKonflikte = {
        "Adler": {
      "Kind": "Zwischen Adler und Kind k√∂nnen Spannungen entstehen, da der strategische Adler einen klaren Plan verfolgt, w√§hrend das Kind impulsiv agiert.",
      "Wal": "Adler und Wal k√∂nnen unterschiedliche Arbeitsrhythmen haben ‚Äì Adler strebt nach Schnelligkeit, Wal setzt auf Ruhe."
    },
    "Ameise": {
      "Piranha": "Ameise und Piranha zeigen unterschiedliche Herangehensweisen: Die Ameise plant strukturiert, der Piranha handelt impulsiv.",
      "Hybrid": "Ameise und Hybrid k√∂nnen in ihrer Methodik auseinandergehen ‚Äì klare Abl√§ufe versus flexible, wechselnde Ans√§tze."
    },
    "Biene": {
      "Hy√§ne": "Biene und Hy√§ne k√∂nnen Spannungen erleben, da die teamorientierte Biene auf Kooperation setzt, w√§hrend die Hy√§ne eher eigenst√§ndig agiert.",
      "Dinosaurier": "Biene und Dinosaurier stehen oft unterschiedlich: Biene arbeitet f√ºrs Team, Dinosaurier agiert pragmatisch."
    },
    "Cham√§leon": {
      "Eule": "Cham√§leon und Eule k√∂nnen in ihrer Herangehensweise kollidieren ‚Äì das Cham√§leon √§ndert oft den Kurs, die Eule sucht klare, logische Linien.",
      "Eiche": "Cham√§leon und Eiche haben unterschiedliche Erwartungen: Wandel versus Best√§ndigkeit."
    },
    "Hund": {
      "Katze": "Hund und Katze k√∂nnen unterschiedliche Bed√ºrfnisse haben ‚Äì der Hund sucht N√§he, die Katze bevorzugt Unabh√§ngigkeit.",
      "Parasit": "Hund und Parasit unterscheiden sich darin, wie offen sie agieren ‚Äì der Hund ist direkt, der Parasit eher taktisch zur√ºckhaltend."
    },
    "Katze": {
      "Hund": "Auch wenn Hund und Katze eng beieinander liegen, k√∂nnen Konflikte entstehen, wenn der Wunsch nach N√§he (Hund) auf das Bed√ºrfnis nach Distanz (Katze) trifft.",
      "Gibbon": "Katze und Gibbon k√∂nnen Spannungen haben, da die ruhige Katze sich nicht immer in das kommunikative Temperament des Gibbons einf√ºgt."
    },
    "Gibbon": {
      "Yak": "Gibbon und Yak haben unterschiedliche Kommunikationsstile ‚Äì Gibbon ist sehr offen, w√§hrend Yak auf Stabilit√§t und Ruhe setzt.",
      "Parasit": "Gibbon und Parasit k√∂nnen sich uneinig sein, da der offene Gibbon direktere Gespr√§che bevorzugt, der Parasit subtiler agiert."
    },
    "Hy√§ne": {
      "Einhorn": "Hy√§ne und Einhorn unterscheiden sich deutlich: Hy√§ne ist kontrollierend und zielstrebig, w√§hrend Einhorn idealistisch und tr√§umerisch agiert.",
      "Biene": "Hy√§ne und Biene k√∂nnen Spannungen erleben, da die zielorientierte Hy√§ne eher eigenst√§ndig agiert, die Biene aber auf Teamarbeit setzt."
    },
    "Insekt (n√ºtzlich)": {
      "Parasit": "Das n√ºtzliche Insekt und der Parasit haben unterschiedliche Priorit√§ten ‚Äì Unterst√ºtzung versus taktisches Verhalten.",
      "Klapperschlange": "Insekt (n√ºtzlich) und Klapperschlange gehen unterschiedlich vor: Kooperative Ans√§tze versus kritische Impulse."
    },
    "Insekt_laestig": {
      "Kind": "Insekt_laestig und Kind k√∂nnen aufeinanderprallen, da das unberechenbare Insekt das emotionale Kind √ºberfordern kann.",
      "Hund": "Insekt_laestig provoziert, w√§hrend der Hund auf Harmonie bedacht ist ‚Äì das f√ºhrt zu Spannungen."
    },
    "Schakal": {
      "Wal": "Schakal und Wal k√∂nnen unterschiedliche Schwerpunkte haben ‚Äì taktisches Vorgehen versus emotionale Tiefe.",
      "Kind": "Schakal und Kind haben oft unterschiedliche Priorit√§ten: Strukturiertes Handeln versus impulsives Verhalten."
    },
    "L√∂we": {
      "Maus": "L√∂we und Maus stehen sich oft gegen√ºber: Der dominante L√∂we agiert energisch, w√§hrend die vorsichtige Maus sich eher zur√ºckzieht.",
      "Eule": "L√∂we und Eule k√∂nnen in ihrem Tempo auseinandergehen ‚Äì schnelle Entscheidungen versus analytische √úberlegungen."
    },
    "Maus": {
      "Hy√§ne": "Maus und Hy√§ne k√∂nnen Spannungen erzeugen, da die ruhige Maus Stabilit√§t sucht, w√§hrend Hy√§ne kraftvoll und fordernd agiert.",
      "L√∂we": "Maus und L√∂we zeigen unterschiedliche Dynamiken: Vorsicht versus dominante Pr√§senz."
    },
    "Parasit": {
      "Wal": "Parasit und Wal haben unterschiedliche Ans√§tze: W√§hrend Wal auf Klarheit und Tiefe setzt, wirkt Parasit oft diffus.",
      "Gibbon": "Parasit und Gibbon bewegen sich in unterschiedlichen Kommunikationswelten ‚Äì subtil versus offen."
    },
    "Wal": {
      "Schakal": "Wal und Schakal k√∂nnen Spannungen haben, da Wal auf emotionale Stabilit√§t setzt, w√§hrend Schakal taktisch vorgeht.",
      "Kind": "Wal und Kind unterscheiden sich: Der Wal sucht Ruhe, das Kind bringt lebhafte, emotionale Impulse ein."
    },
    "Dinosaurier": {
      "Einhorn": "Dinosaurier und Einhorn haben unterschiedliche Herangehensweisen: Sicherheit versus idealistische Visionen.",
      "Cham√§leon": "Dinosaurier und Cham√§leon k√∂nnen in ihren Ans√§tzen kollidieren ‚Äì Best√§ndigkeit versus Wandel."
    },
    "Einhorn": {
      "Hy√§ne": "Einhorn und Hy√§ne zeigen unterschiedliche Temperamente ‚Äì das Einhorn lebt in Visionen, w√§hrend Hy√§ne zielstrebig agiert.",
      "Klapperschlange": "Einhorn und Klapperschlange k√∂nnen in ihrer Herangehensweise auseinandergehen ‚Äì Harmonie versus direkte Impulse."
    },
    "Eiche": {
      "Cham√§leon": "Eiche und Cham√§leon k√∂nnen aufeinanderprallen, da Eiche auf Best√§ndigkeit setzt und Cham√§leon h√§ufig flexibel agiert.",
      "Piranha": "Eiche und Piranha haben unterschiedliche Zug√§nge ‚Äì √ºberlegte Planung versus impulsives Handeln."
    },
    "Eule": {
      "Hy√§ne": "Eule und Hy√§ne k√∂nnen Spannungen haben, da die ruhige Eule tiefgr√ºndige Analysen bevorzugt, w√§hrend Hy√§ne schneller agiert.",
      "Kind": "Eule und Kind unterscheiden sich: Eule w√§gt sorgf√§ltig ab, das Kind handelt impulsiv."
    },
    "Klapperschlange": {
      "Wal": "Klapperschlange und Wal k√∂nnen aufeinanderprallen, da die direkte Klapperschlange oft herausfordernd wirkt und der Wal Sicherheit sucht.",
      "Kind": "Klapperschlange und Kind stehen in Kontrast ‚Äì strukturierte Herangehensweise versus spontane Reaktionen."
    },
    "Faultier": {
      "Adler": "Faultier und Adler haben unterschiedliche Dynamiken ‚Äì Faultier arbeitet in Ruhe, Adler strebt nach H√∂herem.",
      "Piranha": "Faultier und Piranha arbeiten in verschiedenen Tempi ‚Äì was zu Spannungen f√ºhren kann."
    },
    "Geier": {
      "Cham√§leon": "Geier und Cham√§leon k√∂nnen in ihrer Planung auseinandergehen ‚Äì strukturierte Ans√§tze versus wechselnde Strategien.",
      "Kind": "Geier und Kind bewegen sich in unterschiedlichen Zeiten ‚Äì vorausschauend versus im Hier und Jetzt."
    },
    "Piranha": {
      "Eule": "Piranha und Eule k√∂nnen Spannungen erzeugen, da Piranha schnelle Entscheidungen trifft, w√§hrend die Eule erst analysiert.",
      "Faultier": "Piranha und Faultier arbeiten in unterschiedlichen Tempi ‚Äì was zu unpassenden Dynamiken f√ºhrt."
    },
    "Kind": {
      "Adler": "Kind und Adler k√∂nnen in ihrer Ausrichtung auseinandergehen ‚Äì impulsives Entdecken versus strukturierte Planung.",
      "Geier": "Kind und Geier haben unterschiedliche Priorit√§ten ‚Äì spontan versus langfristig denkend."
    },
    "Yak": {
      "Piranha": "Yak ist bedacht ‚Äì Piranha handelt impulsiv. Diese unterschiedliche Herangehensweise kann zu Spannung f√ºhren.",
      "Kind": "Yak sch√§tzt Stabilit√§t, w√§hrend das Kind unberechenbar agiert ‚Äì das erfordert Verst√§ndnis."
    },
    "Einhorn": {
      "Hy√§ne": "Einhorn und Hy√§ne prallen in ihren Ans√§tzen aufeinander ‚Äì idealistische Visionen versus n√ºchterne Zielorientierung.",
      "Schakal": "Einhorn und Schakal haben unterschiedliche Herangehensweisen ‚Äì vertr√§umt versus kontrollierend."
    },
    "Hybrid": {
      "Ameise": "Hybrid und Ameise unterscheiden sich in ihrer Methodik ‚Äì flexibles Denken versus klare Ordnung.",
      "Yak": "Hybrid und Yak haben unterschiedliche Schwerpunkte ‚Äì unkonventionelle Ans√§tze versus best√§ndige Ausdauer."
    }
  };

formElem.addEventListener("submit", function(evt) {
  evt.preventDefault();

// Bestehende Elemente ausblenden
document.querySelector(".logo-container").style.display = "none";
document.querySelector(".beschreibung").style.display = "none";
document.querySelector("h1").style.display = "none";
document.querySelector("button[type='submit']").style.display = "none";
document.querySelector("form").style.display = "none";
document.querySelector(".user-inputs").style.display = "none"; // Versteckt den gesamten Eingabebereich

  // Ergebnisbereich und Print-Button sichtbar machen
  ergebnisElem.style.display = "block";
  printButton.style.display = "block";
  ergebnisElem.style.position = "relative";

  // Werte aus den Eingabefeldern √ºbernehmen (bitte ggf. die Selektoren anpassen)
  var userName = document.querySelector('input[name="name"]').value;
  var userEmail = document.querySelector('input[name="email"]').value;

ergebnisElem.insertAdjacentHTML("afterbegin", `
  <div id="result-header" style="
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    padding: 0 1rem;  /* nur horizontales Padding */
    margin: 0;       /* kein extra vertikales Padding */
    background-color: #ffffff;
    box-sizing: border-box;
  ">
    <!-- Links: Kontaktdaten -->
    <div id="left-info" style="
      flex: 1;
      font-size: 0.75em;
      color: #333;
      line-height: 1.2;
    ">
      <div>Nicole St√∂cker und Peter Renner,</div>
      <div>Murwiesenstrasse 30, <span style="white-space: nowrap;">8057 Z√ºrich, Schweiz</span></div>
      <div>info@organisationszoo.ch, Telefon +41 43 288 53 83, www.organisationszoo.ch</div>
      <div>Name: ${userName}</div>
      <div>E-Mail: ${userEmail}</div>
    </div>
    <!-- Mitte: Titel -->
    <div style="
      flex: 1;
      text-align: center;
      font-size: 1.2em;
      font-weight: bold;
      color: #E44A00;
    ">
      Individuelles Verhaltensprofil
    </div>
    <!-- Rechts: Eulen-Logo -->
    <div id="right-logo" style="
      flex: 1;
      text-align: right;
    ">
      <img src="eule-organisationszoo.png" alt="Eule" style="
        height: 2.5cm;
        width: auto;
        object-fit: cover;
        border-radius: 0;
        background-color: #fff;
        border: none;
      ">
    </div>
  </div>
`);

  const formData = new FormData(formElem);
  const tierCounts = {};
  const eigenschaftCounts = {
    "Empathie": 0, "Sozialverhalten": 0, "Kreativit√§t": 0,
    "Struktur": 0, "Durchsetzung": 0, "Flexibilit√§t": 0,
    "Strategie": 0, "Emotionale Stabilit√§t": 0
  };

  // ---------------------------
  // Punkte aus den Antworten sammeln
  // ---------------------------
 for (let i = 0; i < questions.length; i++) {
  const q = questions[i];
  const keys = Object.keys(q.answers);
  for (let j = 0; j < keys.length; j++) {
    const code = q.answers[keys[j]].code;
    const val = parseInt(formData.get("frage" + i + "_" + code)) || 0;
    const directAnimal = codeToTier[code];
    if (!directAnimal) continue;

    // Direkte Punktevergabe f√ºr das zugeordnete Tier:
    tierCounts[directAnimal] = (tierCounts[directAnimal] || 0) + val;

    // Zus√§tzliche Bonuspunkte: F√ºr alle Tiere, die als √§hnlich eingestuft werden
    // (unabh√§ngig von der genauen Anzahl gemeinsamer Eigenschaften, also immer 1 Punkt).
    const similarAnimals = similarityMapping[directAnimal] || [];
    similarAnimals.forEach(sim => {
      // Du kannst pr√ºfen, ob sim.animal schon der direkte Tiername ist ‚Äì eigentlich nicht n√∂tig, da im similarityMapping der direkte Vergleich normalerweise ausgeschlossen wird.
      tierCounts[sim.animal] = (tierCounts[sim.animal] || 0) + 0.5;
    });

    // Den Gegenspieler abziehen, falls val >= 3, wie bisher:
    if (val >= 3) {
      const opp = gegenspieler[directAnimal];
      if (opp) {
        tierCounts[opp] = (tierCounts[opp] || 0) - 1;
      }
    }
  }
}

const gesamtPunkte = Object.values(tierCounts).reduce((sum, v) => sum + v, 0);

  // ---------------------------
  // Gesamtauswertung Top-5 Tierprofile
  // ---------------------------
  ergebnisElem.innerHTML += `<h2>Deine Top-5 Profile</h2>`;
  const sortedTiers = Object.entries(tierCounts).sort((a, b) => b[1] - a[1]);
  const top5 = sortedTiers.slice(0, 5);
  const top5Names = top5.map(([t]) => t);
  const top5Total = top5.reduce((s, [_, v]) => s + v, 0);

 const chartWrap = document.createElement("div");
chartWrap.style.display = "flex";
chartWrap.style.flexDirection = "column";  // Elemente untereinander anordnen
chartWrap.style.gap = "20px";              // Abstand zwischen den Profilen
chartWrap.style.alignItems = "center";     // Zentriert die einzelnen Profilboxen horizontal

  top5.forEach(([tier, val]) => {
    const canvasId = `tierChart_${tier.replace(/\s+/g, '_')}`;
    const info = tierTexte[tier] || {};
    const percentValue = val;

   const div = document.createElement("div");
div.className = "tier-profil";

div.innerHTML = `
  <div class="tier-bild">
    <img src="${tier.toLowerCase()}.png" alt="${tier}" />
  </div>
  <div class="tier-text">
    <strong>${tier}</strong>
    <p>${info.kurz || ""}</p>
    <em>Symbolisch f√ºr: ${info.symbolischF√ºr || "-"}</em>
  </div>
  <div class="tier-diagramm">
    <canvas id="${canvasId}" width="80" height="80"></canvas>
  </div>
`;
chartWrap.appendChild(div);

setTimeout(() => {
  new Chart(document.getElementById(canvasId).getContext("2d"), {
    type: 'pie',
    data: {
      labels: ["Anteil", "Andere"],
      datasets: [{
        data: [val, gesamtPunkte - val],
        backgroundColor: ["#E44A00", "#FFD1B2"],
        borderWidth: 0
      }]
    },
    options: {
      responsive: false,
      plugins: {
        legend: { display: false }
      }
    }
  });
}, 10);
  });

  ergebnisElem.appendChild(chartWrap);

// Konfliktpotential - Berechnung des konfliktPaare-Arrays:
const konfliktPaare = [];
top5.forEach(([tier, val]) => {
  const gegner = gegenspieler[tier];
  if (gegner && !top5Names.includes(gegner)) {
    const gegVal = tierCounts[gegner] || 0;
    const score = Math.abs(val - gegVal);
    const text = (tierKonflikte[tier] && tierKonflikte[tier][gegner]) ||
                 (tierKonflikte[gegner] && tierKonflikte[gegner][tier]) ||
                 "Gegens√§tzliche Strategien.";
    konfliktPaare.push({ paar: [tier, gegner], score, text });
  }
});
konfliktPaare.sort((a, b) => b.score - a.score);

// Neuen Konfliktbereich erzeugen:
let conflictHeader = document.createElement("div");
conflictHeader.innerHTML = "<h2 style='font-size: 1.5em;'>Gr√∂sste Herausforderungen mit:</h2>";

if (konfliktPaare.length > 0) {
  const conflictPair = konfliktPaare[0];
  const conflictTier = conflictPair.paar[1];
  const conflictText = conflictPair.text;
  
  const conflictDiv = document.createElement("div");
  conflictDiv.className = "tier-profil";
  conflictDiv.innerHTML = `
    <div class="tier-bild">
      <img src="${conflictTier.toLowerCase()}.png" alt="${conflictTier}" />
    </div>
    <div class="tier-text">
      <strong>${conflictTier}</strong>
      <p>${(tierTexte[conflictTier] && tierTexte[conflictTier].kurz) || ""}</p>
      <em>${conflictText}</em>
    </div>
  `;
  
  ergebnisElem.appendChild(conflictHeader);
  ergebnisElem.appendChild(conflictDiv);
} else {
  conflictHeader.innerHTML += "<p>Keine Konflikte erkannt.</p>";
  ergebnisElem.appendChild(conflictHeader);
}
// Seitenumbruch einf√ºgen (zwischen Konfliktpotential und der Kategorieneinsch√§tzung)
ergebnisElem.insertAdjacentHTML("beforeend", `<div class="page-break"></div>`);

// Mapping der Kategorien zu den Frage-Indizes (0-basierend)
// F√ºr "Selbstreflexion, Werte & Pers√∂nliche Entwicklung" werden nur die Indizes [2, 4, 8] verwendet
const categoryMapping = {
  "Teamarbeit & Zusammenarbeit": [0, 1, 9],
  "F√ºhrung & Verantwortung": [6, 7, 12],
  "Entscheidungsfindung & Strategische Planung": [5, 10],
  "Anpassungsf√§higkeit & Stressbew√§ltigung": [3, 11],
  "Selbstreflexion, Werte & Pers√∂nliche Entwicklung": [2, 4, 8]
};

// Kurze Beschreibungen f√ºr die Top-Tiere pro Kategorie
const categoryDescriptions = {
  "Teamarbeit & Zusammenarbeit": {
   "Ameise": "Organisiert und zielstrebig, sorgt f√ºr Struktur im Team.",
    "Biene": "Fleissig und gemeinschaftlich, f√∂rdert den Zusammenhalt.",
    "Cham√§leon": "Flexibel und kreativ, bringt neue Ideen ins Team.",
    "Hund": "Empathisch und loyal, st√§rkt den Teamgeist.",
    "Adler": "Kann inspirieren, neigt aber zu Individualismus.",
    "Katze": "Agiert eigenst√§ndig und bringt oft kritische Perspektiven ein.",
    "Gibbon": "Kommunikativ und reflektiert, moderiert gut in Gruppen.",
    "Hy√§ne": "Dominant und durchsetzungsstark, sorgt f√ºr klare Rollenverteilung.",
    "Insekt (n√ºtzlich)": "Unterst√ºtzend und ideenreich, denkt l√∂sungsorientiert f√ºr das Team.",
    "Insekt_laestig": "Egoistisch und unruhig, kann Teamprozesse st√∂ren.",
    "Schakal": "Eigensinnig und rebellisch, bringt Spannung ins Team ‚Äì nicht immer konstruktiv.",
    "L√∂we": "F√ºhrungsstark, aber wenig teamorientiert ‚Äì lieber Anf√ºhrer als Mitl√§ufer.",
    "Maus": "Ruhig und vorsichtig, arbeitet gewissenhaft im Hintergrund.",
    "Parasit": "Anpassungsf√§hig, aber oft eigenn√ºtzig ‚Äì profitiert mehr als er beitr√§gt.",
    "Eule": "Weitsichtig und klug, bringt Tiefe in Diskussionen, aber bleibt lieber aussen vor.",
    "Piranha": "Zielorientiert, aber aggressiv ‚Äì kann Gruppendynamik unter Druck setzen.",
    "Eiche": "Standhaft und inspirierend, bringt Stabilit√§t ins Team.",
    "Klapperschlange": "Schlau und taktisch ‚Äì verfolgt eher eigene Interessen im Team.",
    "Faultier": "Geduldig und ruhig ‚Äì verlangsamt, aber harmonisiert Gruppenprozesse.",
    "Dinosaurier": "Erfahrungsreich, aber zur√ºckhaltend ‚Äì wirkt oft passiv im Team.",
    "Einhorn": "Vision√§r und idealistisch ‚Äì inspiriert, aber schwer greifbar im Alltag.",
    "Geier": "Anpassungsf√§hig, aber zur√ºckhaltend ‚Äì beobachtet mehr als er mitwirkt.",
    "Wal": "Vertrauensvoll und tiefgr√ºndig ‚Äì bringt emotionale Intelligenz ins Team.",
    "Hybrid": "Intelligent, aber distanziert ‚Äì zieht analytisches Denken Gruppenbindung vor.",
    "Yak": "Robust und loyal ‚Äì unterst√ºtzt konstant ohne viel Aufhebens.",
    "Kind": "Begeistert und kreativ ‚Äì belebt die Zusammenarbeit, braucht aber F√ºhrung."
  },
  "F√ºhrung & Verantwortung": {
     "Adler": "F√ºhrungspers√∂nlichkeit, vision√§r und entschlossen.",
    "Hybrid": "Vielseitig in der F√ºhrung, kombiniert Strategie mit Flexibilit√§t.",
    "L√∂we": "Dominant und charismatisch, aber manchmal autorit√§r.",
    "Hund": "Verantwortungsbewusst und kooperativ.",
    "Ameise": "Organisiert und teamorientiert ‚Äì √ºbernimmt Verantwortung im Kollektiv.",
    "Biene": "Pflichtbewusst und fleissig, tr√§gt viel zur Gemeinschaft bei.",
    "Cham√§leon": "Indirekt f√ºhrend, nutzt Anpassungsf√§higkeit strategisch.",
    "Katze": "Eigenverantwortlich und unabh√§ngig ‚Äì meidet klassische F√ºhrungsrollen.",
    "Gibbon": "Reflektierend und unterst√ºtzend ‚Äì f√ºhrt durch Dialog.",
    "Hy√§ne": "Durchsetzungsf√§hig und kontrollierend, oft dominant.",
    "Insekt (n√ºtzlich)": "Hilfreich im Hintergrund ‚Äì √ºbernimmt Verantwortung ohne F√ºhrungsanspruch.",
    "Insekt_laestig": "Verantwortungsscheu, wirkt oft st√∂rend statt f√ºhrend.",
    "Schakal": "Rebellisch, √ºbernimmt ungern Verantwortung ‚Äì f√ºhrt lieber gegen den Strom.",
    "Maus": "Zur√ºckhaltend, √ºbernimmt Verantwortung nur in sicherem Rahmen.",
    "Parasit": "Vermeidet Verantwortung, agiert lieber im Schatten.",
    "Eule": "Weise und strategisch ‚Äì f√ºhrt durch Wissen und Erfahrung.",
    "Piranha": "Dominant und schnell entscheidend ‚Äì f√ºhrt eher durch Druck.",
    "Eiche": "Stark und konstant ‚Äì ein nat√ºrlicher Ruhepol in F√ºhrungsrollen.",
    "Klapperschlange": "Taktisch und politisch ‚Äì f√ºhrt verdeckt und berechnend.",
    "Faultier": "Meidet Verantwortung ‚Äì zu langsam f√ºr klassische F√ºhrungsrollen.",
    "Dinosaurier": "Traditionell und distanziert ‚Äì f√ºhrt durch Erfahrung, nicht durch N√§he.",
    "Einhorn": "Idealistisch und inspiriert ‚Äì aber oft zu tr√§umerisch f√ºr Verantwortung.",
    "Geier": "F√ºhrt selten ‚Äì wartet lieber ab, als zu agieren.",
    "Wal": "Emotional intelligent und vertrauensw√ºrdig ‚Äì √ºbernimmt Verantwortung mit Weitblick.",
    "Yak": "Verantwortungsvoll und stark ‚Äì f√ºhrt durch Best√§ndigkeit.",
    "Kind": "√úbernimmt spontan Verantwortung, aber ohne langfristige Perspektive."
  },
 "Entscheidungsfindung & Strategische Planung": {
    "Gibbon": "Kreativ und √ºberlegt, trifft fundierte Entscheidungen.",
    "Einhorn": "Vision√§r und innovativ, entwickelt strategische Pl√§ne.",
    "Adler": "Strukturiert und zielgerichtet in der Planung.",
    "Ameise": "Plant methodisch, um Ziele zu erreichen.",
    "Biene": "Effizient und pragmatisch, trifft Entscheidungen im Sinne des Kollektivs.",
    "Cham√§leon": "Flexibel und taktisch, nutzt Gelegenheiten geschickt.",
    "Hund": "Emotional und loyal ‚Äì Entscheidungen basieren auf Vertrauen und Intuition.",
    "L√∂we": "Dominant und entschlossen ‚Äì trifft schnell Entscheidungen mit F√ºhrungsanspruch.",
    "Katze": "Analytisch und unabh√§ngig ‚Äì entscheidet eigenst√§ndig nach Abw√§gung.",
    "Hy√§ne": "Berechnend und kontrollierend ‚Äì verfolgt langfristige Strategien.",
    "Insekt (n√ºtzlich)": "Kreativ und l√∂sungsorientiert ‚Äì denkt unkonventionell.",
    "Insekt_laestig": "Impulsiv und st√∂rend ‚Äì wenig strategische Tiefe.",
    "Schakal": "Spontan, eigenn√ºtzig ‚Äì Entscheidungen oft rebellisch motiviert.",
    "Maus": "Vorsichtig und bedacht ‚Äì w√§gt lange ab vor Entscheidungen.",
    "Parasit": "Vermeidet Entscheidungen ‚Äì passt sich lieber an Gegebenheiten an.",
    "Eule": "Weise und reflektierend ‚Äì trifft gut durchdachte, langfristige Entscheidungen.",
    "Piranha": "Impulsiv und aggressiv ‚Äì entscheidet unter Druck, oft kurzfristig.",
    "Eiche": "Stabil und vorausschauend ‚Äì trifft Entscheidungen mit Weitblick.",
    "Klapperschlange": "Taktisch und vorausschauend ‚Äì trifft stille, aber gezielte Entscheidungen.",
    "Faultier": "Langsam und z√∂gerlich ‚Äì trifft Entscheidungen sp√§t oder gar nicht.",
    "Dinosaurier": "Konservativ und starr ‚Äì plant aus Erfahrung, meidet Ver√§nderungen.",
    "Geier": "Wartet ab und beobachtet ‚Äì entscheidet, wenn es strategisch am g√ºnstigsten ist.",
    "Wal": "Intuitiv und tiefgr√ºndig ‚Äì trifft √ºberlegte, wertebasierte Entscheidungen.",
    "Hybrid": "Strategisch flexibel ‚Äì analysiert komplexe Zusammenh√§nge schnell.",
    "Yak": "Standhaft und praktisch ‚Äì trifft Entscheidungen, die auf Stabilit√§t setzen.",
    "Kind": "Spontan und kreativ ‚Äì entscheidet nach Bauchgef√ºhl, nicht Strategie."
  },
"Anpassungsf√§higkeit & Stressbew√§ltigung": {
    "Ameise": "Bleibt organisiert und zielgerichtet, auch unter Druck.",
    "Biene": "Reagiert strukturiert und gemeinschaftlich auf Stresssituationen.",
    "Cham√§leon": "Extrem anpassungsf√§hig ‚Äì meistert Stress durch Tarnung und Wandel.",
    "Hund": "Sucht emotionale Bindung zur Stressbew√§ltigung ‚Äì reagiert sensibel.",
    "Adler": "Beobachtet und entscheidet ruhig ‚Äì bleibt in Stresssituationen fokussiert.",
    "Katze": "Zieht sich zur√ºck und l√∂st Probleme unabh√§ngig.",
    "Gibbon": "Kommuniziert in Stresssituationen offen ‚Äì sucht Ausgleich durch Austausch.",
    "Hy√§ne": "Reagiert impulsiv, aber zielgerichtet ‚Äì k√§mpft sich durch.",
    "Insekt (n√ºtzlich)": "Flexibel und kreativ ‚Äì l√∂st Stress pragmatisch.",
    "Insekt_laestig": "Verst√§rkt Stress im Umfeld ‚Äì unruhig und st√∂rend.",
    "Schakal": "Rebelliert in Stresssituationen ‚Äì neigt zu impulsivem Verhalten.",
    "L√∂we": "Bleibt dominant und kontrollierend ‚Äì l√§sst sich selten aus der Ruhe bringen.",
    "Maus": "Reagiert mit Vorsicht und R√ºckzug ‚Äì sensibel gegen√ºber Stress.",
    "Parasit": "Weicht Verantwortung aus ‚Äì entzieht sich stressigen Situationen.",
    "Eule": "Analysiert Situationen tiefgr√ºndig ‚Äì reagiert ruhig und weise.",
    "Piranha": "Aggressiv unter Druck ‚Äì reagiert schnell und instinktiv.",
    "Eiche": "Bleibt standhaft ‚Äì meistert Stress durch Ruhe und Stabilit√§t.",
    "Klapperschlange": "Verh√§lt sich defensiv ‚Äì kalkuliert ihre Reaktionen.",
    "Faultier": "Bleibt langsam und gelassen ‚Äì reagiert kaum auf √§usseren Druck.",
    "Dinosaurier": "Tut sich schwer mit Wandel ‚Äì reagiert oft starr auf Stress.",
    "Einhorn": "Sucht kreative Wege zur Bew√§ltigung ‚Äì kann unter Druck aber √ºberfordert sein.",
    "Geier": "Passt sich langsam an ‚Äì wartet Stress eher aus.",
    "Wal": "Nutzt emotionale Tiefe zur Verarbeitung ‚Äì bleibt gelassen.",
    "Hybrid": "Reagiert intelligent und schnell ‚Äì bleibt flexibel in jeder Situation.",
    "Yak": "Ruhig und belastbar ‚Äì tr√§gt Stress √ºber lange Zeit ohne zu klagen.",
    "Kind": "Reagiert spontan ‚Äì kann Stress nicht langfristig verarbeiten, aber bleibt neugierig."
 },
  "Selbstreflexion, Werte & Pers√∂nliche Entwicklung": {
     "Ameise": "Reflektiert strukturiert und arbeitet kontinuierlich an sich.",
    "Biene": "Offen f√ºr Feedback und strebt nach st√§ndiger Verbesserung.",
    "Katze": "Zeigt Selbstkritik und agiert unabh√§ngig.",
    "Gibbon": "Bringt kreative und kommunikative Impulse in die Selbstreflexion.",
    "Eule": "Wirkt weise und analytisch ‚Äì ideal f√ºr tiefe Reflexion.",
    "Adler": "Reflektiert zielorientiert, entwickelt sich durch Herausforderungen.",
    "Cham√§leon": "Reflektiert situativ ‚Äì Entwicklung oft taktisch motiviert.",
    "Hund": "Entwickelt sich durch Beziehungen und emotionale Erfahrungen.",
    "L√∂we": "Selbstbewusst und stolz ‚Äì pers√∂nliche Entwicklung ist machtorientiert.",
    "Hy√§ne": "Stark getrieben von Ehrgeiz ‚Äì reflektiert strategisch.",
    "Insekt (n√ºtzlich)": "Selbstwirksam und lernbereit ‚Äì w√§chst durch n√ºtzliche Aufgaben.",
    "Insekt_laestig": "Geringe Selbstreflexion ‚Äì eher selbstzentriert.",
    "Schakal": "Rebellisch, aber mit innerem Antrieb zur Ver√§nderung.",
    "Maus": "Still und vorsichtig ‚Äì reflektiert tief, aber zur√ºckhaltend.",
    "Parasit": "Wenig selbstkritisch ‚Äì Entwicklung meist aus Notwendigkeit.",
    "Piranha": "Selbstkritik kaum vorhanden ‚Äì wenig Interesse an innerer Entwicklung.",
    "Eiche": "Stabil und wertebasiert ‚Äì pers√∂nliche Entwicklung ist stetig und ruhig.",
    "Klapperschlange": "Strategisch reflektiert ‚Äì Entwicklung erfolgt berechnend.",
    "Faultier": "Ruhig und geduldig ‚Äì reflektiert mit innerer Gelassenheit.",
    "Dinosaurier": "Reflexion in traditionellen Bahnen ‚Äì Entwicklung verl√§uft langsam.",
    "Einhorn": "Stark idealistisch ‚Äì reflektiert auf Sinn und Werte bezogen.",
    "Geier": "Beobachtend ‚Äì reflektiert eher √ºber andere als √ºber sich selbst.",
    "Wal": "Emotional tief ‚Äì reflektiert √ºber das grosse Ganze.",
    "Hybrid": "Introspektiv und analytisch ‚Äì kombiniert Rationalit√§t mit Selbstentwicklung.",
    "Yak": "Bodenst√§ndig und ruhig ‚Äì reflektiert durch Erfahrung.",
    "Kind": "Offen, neugierig ‚Äì entwickelt sich spielerisch durch neue Eindr√ºcke."
  }
};

// Objekt zum Speichern der Ergebnisse pro Kategorie
const categoryResults = {};

// Punkte aus den zugeordneten Fragen f√ºr jede Kategorie sammeln
for (const [category, questionIndices] of Object.entries(categoryMapping)) {
  categoryResults[category] = {};
  questionIndices.forEach(qIndex => {
    const q = questions[qIndex];
    for (const key in q.answers) {
      const code = q.answers[key].code;
      const animal = codeToTier[code];
      if (!animal) continue;
      // Hole den Punktwert aus dem Formular
      const val = parseInt(formData.get("frage" + qIndex + "_" + code)) || 0;
      categoryResults[category][animal] = (categoryResults[category][animal] || 0) + val;
      // Abzug beim Gegenspieler, wenn der Wert 3 oder 4 ist
      if (val >= 3) {
        const opp = gegenspieler[animal];
        if (opp) {
          categoryResults[category][opp] = (categoryResults[category][opp] || 0) - 1;
        }
      }
    }
  });
}

// Erstelle den HTML-Output: Pro Kategorie wird nur das Tier mit der h√∂chsten Punktzahl angezeigt,
// inklusive der Tierbeschreibung und des Symbols ‚Äì Punktwerte und Normalisierung werden nicht ausgegeben.
let categoryOutputHTML = `
  <h2 style="font-weight: bold; margin-bottom: 20px;">Deine Tiermetaphern im Kontext</h2>
  <p style="font-size: 0.9em; margin-bottom: 20px;">
    In diesem Abschnitt werden deine Tiermetaphern in separaten Berechnungen dargestellt ‚Äì etwa in den Bereichen F√ºhrung, Teamarbeit, strategische Planung, Anpassungsf√§higkeit und Selbstreflexion.
    Jede Zeile zeigt links das Tierbild, in der Mitte den Kategorienamen und rechts die zugeh√∂rige Beschreibung.
  </p>
`;

for (const [category, animalScores] of Object.entries(categoryResults)) {
  // Sortiere die Ergebnisse absteigend, um das Tier mit der h√∂chsten Punktzahl zu ermitteln:
  const sorted = Object.entries(animalScores).sort((a, b) => b[1] - a[1]);
  const topAnimal = sorted.length > 0 ? sorted[0][0] : "Keine Daten";
  
  let description = "";
  if (categoryDescriptions[category] && categoryDescriptions[category][topAnimal]) {
    description = categoryDescriptions[category][topAnimal];
  }
  
  // Erstelle eine Container-Zeile mit drei gleich breiten Spalten
categoryOutputHTML += `
  <div class="tier-container">

    <!-- Bild links -->
    <div style="flex: 0 0 80px; text-align: center; margin-right: 10px;">
      <img src="${topAnimal.toLowerCase()}.png" alt="${topAnimal}" style="height: 2.5cm; width: auto; max-width: 100%;">
    </div>

    <!-- Mitte: Tiername + Kategorie -->
    <div style="flex: 1; min-width: 120px; text-align: center;">
      <div style="font-weight: bold; font-size: 1em; margin-bottom: 4px;">
        ${topAnimal}
      </div>
      <div style="font-size: 0.9em; font-weight: 600;">
        ${category}
      </div>
    </div>

    <!-- Beschreibung rechts -->
    <div style="flex: 2; min-width: 150px; text-align: left; padding-left: 10px;">
      <p style="margin: 0;">${description}</p>
    </div>

  </div>
`;
}

ergebnisElem.insertAdjacentHTML("beforeend", categoryOutputHTML);

// Seitenumbruch einf√ºgen (zwischen Kategorieneinsch√§tzung und der Netzdiagramm)
ergebnisElem.insertAdjacentHTML("beforeend", `<div class="page-break"></div>`);

// ---------------------------
// Neues Netzdiagramm: Werte aller Tiere, aber Anzeige nur f√ºr erste 8 Tiere
// ---------------------------

// F√ºge einen Container mit Titel und Beschreibung f√ºr das Netzdiagramm hinzu
const netzdiagrammInfo = document.createElement("div");
netzdiagrammInfo.style.textAlign = "center";
netzdiagrammInfo.style.marginBottom = "10px";
netzdiagrammInfo.innerHTML = `
  <h2>Spinnennetz der St√§rke</h2>
  <p style="font-size: 0.9em;">
    Dieses Diagramm zeigt dir deine St√§rken und Entwicklungsfelder basierend auf den ermittelten Tiermerkmalen. 
    Schau dir an, in welchen Bereichen du besonders ausgepr√§gt bist und wo noch Potenzial zur Weiterentwicklung besteht.
  </p>
`;

// F√ºge die Info-Div an der gew√ºnschten Stelle ein
ergebnisElem.appendChild(netzdiagrammInfo);

// Canvas f√ºr Radar-Chart mit HiDPI-Rendering (scharf im Druck)
const size = 400; // statt 300, damit das Diagramm gr√∂√üer wird
const scale = 2;  // Aufl√∂sung beibehalten
const canvas = document.createElement("canvas");

canvas.style.display = "block";
canvas.style.margin = "0 auto";

canvas.width = size * scale;
canvas.height = size * scale;
canvas.style.width = size + "px";
canvas.style.height = size + "px";

const ctx = canvas.getContext("2d");
ctx.scale(scale, scale);
ergebnisElem.appendChild(canvas);

// Die 8 Tiere mit den meisten Punkten automatisch w√§hlen
const displayTiere = Object.entries(tierCounts)
  .sort((a, b) => b[1] - a[1])  // absteigend sortieren
  .slice(0, 8)                  // Top 8 nehmen
  .map(([tier]) => tier);      // Nur die Tiernamen extrahieren

// Eigenschaften sammeln: Z√§hler f√ºr alle Eigenschaften (alle Tiere flie√üen ein!)
const gesamtEigenschaftCounts = {};
const gesamtEigenschaftMax = {};

// Initialisiere alle Eigenschaften
Object.values(tierEigenschaften).flat().forEach(attr => {
  gesamtEigenschaftCounts[attr] = 0;
  gesamtEigenschaftMax[attr] = 0;
});

// Werte aus dem Formular sammeln (alle Tiere!)
for (let i = 0; i < questions.length; i++) {
  const q = questions[i];
  const keys = Object.keys(q.answers);

  for (let j = 0; j < keys.length; j++) {
    const code = q.answers[keys[j]].code;
    const val = parseInt(formData.get("frage" + i + "_" + code)) || 0;
    const animal = codeToTier[code];

    if (!animal || !tierEigenschaften[animal]) continue;
    if (!displayTiere.includes(animal)) continue;

    tierEigenschaften[animal].forEach(attr => {
      gesamtEigenschaftCounts[attr] += val;
      gesamtEigenschaftMax[attr] += 4;
    });
  }
}

// Jetzt: Nur die Eigenschaften der ersten 8 Tiere anzeigen
const filteredEigenschaftCounts = {};
const filteredEigenschaftMax = {};

// Nur Eigenschaften der ersten 8 Tiere
displayTiere.forEach(tier => {
  if (!tierEigenschaften[tier]) return;
  tierEigenschaften[tier].forEach(attr => {
    filteredEigenschaftCounts[attr] = gesamtEigenschaftCounts[attr] || 0;
    filteredEigenschaftMax[attr] = gesamtEigenschaftMax[attr] || 16; // Fallback
  });
});

// Eigenschaftswerte in Prozent umrechnen
Object.keys(gesamtEigenschaftCounts).forEach(attr => {
  const max = gesamtEigenschaftMax[attr] || 1;
  gesamtEigenschaftCounts[attr] = Math.round((gesamtEigenschaftCounts[attr] / max) * 100);
});

// Gefilterte Eigenschaften (nur jene, die der ersten 8 Tiere zugeordnet sind)
const filteredEigKeys = Object.keys(filteredEigenschaftCounts);

// Berechne den Durchschnitt aller Prozentwerte (f√ºr alle relevanten Attribute)
let sum = 0;
filteredEigKeys.forEach(attr => {
  sum += gesamtEigenschaftCounts[attr];
});
const overallAverage = sum / filteredEigKeys.length;

// Berechne f√ºr jede Eigenschaft die Differenz zum Durchschnitt
const attributeDifferences = {};
filteredEigKeys.forEach(attr => {
  // Differenz: Eigenschaftswert minus Gesamtdurchschnitt
  attributeDifferences[attr] = Math.round((gesamtEigenschaftCounts[attr] - overallAverage) * 10) / 10;
});

console.log("Prozentwerte:", gesamtEigenschaftCounts);
console.log("Durchschnitt:", overallAverage);
console.log("Differenzen:", attributeDifferences);

// Berechne den h√∂chsten Wert als Basis f√ºr dynamicMax
const maxEigenschaftswert = Math.max(...Object.values(gesamtEigenschaftCounts));
const dynamicMax = Math.ceil(maxEigenschaftswert * 1.2);  // 20 % Luft nach oben

// Dark Mode Erkennung:
const darkMode = window.matchMedia("(prefers-color-scheme: dark)").matches;

// Dynamische Farbzuweisung f√ºr die Point Labels und Grid-Linien:
const pointLabelColor = darkMode ? "#ffffff" : "#000000";  // Wei√ü im Dark Mode, Schwarz im Light Mode
const gridColor = darkMode ? "#555555" : "#eee";  // Beispiel: Alternativ kannst du hier auch "#cccccc" o.√§. verwenden

if (filteredEigKeys.length > 0) {
  new Chart(ctx, {
  type: 'radar',
  data: {
    labels: Object.keys(gesamtEigenschaftCounts),
    datasets: [{
      label: "Dein Profil",
      data: Object.values(gesamtEigenschaftCounts),
      backgroundColor: "rgba(228, 74, 0, 0.3)",
      borderColor: "#E44A00",
      pointBackgroundColor: "#E44A00",
      borderWidth: 2
    }]
  },
  options: {
    responsive: false,
    scales: {
      r: {
        suggestedMin: 0,
        suggestedMax: dynamicMax,
        ticks: {
          stepSize: 20,
          backdropColor: "transparent",
          font: { size: 12 }
        },
        pointLabels: {
          font: { size: 28 },
          color: pointLabelColor  // Dynamische Farbe: wei√ü im Dark Mode, schwarz im Light Mode
        },
        grid: { color: gridColor },
        angleLines: { color: "#ccc" }
      }
    },
    plugins: {
      legend: { display: false }
    }
  }
});
}

// ---------------------------
// Reflexionstext als Abschluss
// ---------------------------
  const reflekt = document.createElement("div");
  reflekt.style.fontSize = "0.75em";
  reflekt.innerHTML = `
    <h3> Was dein Tierprofil dir zeigt ‚Äì und warum es mehr als nur spannend ist</h3>
    <p>
  Dein Ergebnis ist mehr als eine nette Spielerei: 
  <strong>Es ist ein Spiegel deiner aktuellen Verhaltensdynamik</strong>.
  Jedes Tier steht f√ºr bestimmte Denk-, F√ºhl- und Handlungsweisen ‚Äì und 
  <em>der Mix macht dich einzigartig</em>.
</p>
<p>
  Vielleicht steckt in dir die stille Weisheit einer <strong>Eule</strong>, die Treue eines <strong>Hundes</strong>, 
  das strategische Gesp√ºr einer <strong>Hy√§ne</strong>, die Vision eines <strong>Adlers</strong> oder 
  das kreative Chaos eines <strong>Gibbons</strong>?
</p>
<p>
  Diese Tierbilder helfen dir, dich selbst mit einem Augenzwinkern und gleichzeitig mit Tiefe zu betrachten ‚Äì 
  <strong>ohne Schubladen, daf√ºr mit Raum zur Reflexion</strong>.
</p>
<p>
  Lust, dein Profil gemeinsam mit anderen zu entdecken, zu hinterfragen und weiterzuentwickeln?
  <strong>Dann ist ein Workshop genau das Richtige f√ºr dich!</strong>
</p>
<p>
  Denn: <em>Pers√∂nlichkeitsentwicklung darf Spass machen.</em> Erkenntnisse gewinnen wir oft am besten im Austausch.
</p>
  `;
 ergebnisElem.appendChild(reflekt);
});

// üß† E-Mail pr√ºfen, Button nur aktivieren bei g√ºltiger Adresse
const emailInput = document.getElementById("email");
const auswertenBtn = document.getElementById("auswertenBtn");

emailInput.addEventListener("input", () => {
  const emailWert = emailInput.value.trim();
  const istGueltig = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailWert);
  auswertenBtn.disabled = !istGueltig;
});

// üñ® Druck-Button: L√∂st window.print() aus
printButton.addEventListener("click", function() {
  window.print();
});
    });

</script>
<!-- Footer nur beim Drucken sichtbar ‚Äì direkt vor </body> -->
<div class="print-footer">
 ¬© 2025 <span style="color: #E44A00;">OrganisationsZoo</span> Nicole St√∂cker, Peter Renner und Simon Bertogg - Alle Rechte vorbehalten
</div>
</body>
</html>